{"version":3,"file":"wallet-poi-requester.js","sourceRoot":"","sources":["../../../src/services/poi/wallet-poi-requester.ts"],"names":[],"mappings":";;;AACA,yDAAoD;AACpD,oEAA0E;AAE1E,MAAa,kBAAkB;IACrB,cAAc,CAA2B;IAEjD,YAAY,WAAsB;QAChC,IAAI,CAAC,cAAc,GAAG,IAAA,yBAAS,EAAC,WAAW,CAAC;YAC1C,CAAC,CAAC,IAAI,iCAAc,CAAC,WAAW,CAAC;YACjC,CAAC,CAAC,SAAS,CAAC;IAChB,CAAC;IAED,KAAK,CAAC,6BAA6B,CACjC,WAAwB,EACxB,KAAY,EACZ,IAAY,EACZ,KAAa,EACb,UAAkB;QAElB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxB,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC,cAAc,CAAC,6BAA6B,CACtD,WAAW,EACX,KAAK,EACL,IAAI,EACJ,KAAK,EACL,UAAU,CACX,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,6BAA6B,CACjC,WAAwB,EACxB,KAAY;QAEZ,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxB,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,CAAC;SACxD;QACD,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,6BAA6B,CACxE,WAAW,EACX,KAAK,CACN,CAAC;QACF,OAAO;YACL,SAAS,EAAE,UAAU,CAAC,kBAAkB;YACxC,UAAU,EAAE,UAAU,CAAC,mBAAmB;SAC3C,CAAC;IACJ,CAAC;CACF;AA5CD,gDA4CC","sourcesContent":["import { Chain } from '@railgun-community/engine';\nimport { POINodeRequest } from './poi-node-request';\nimport { TXIDVersion, isDefined } from '@railgun-community/shared-models';\n\nexport class WalletPOIRequester {\n  private poiNodeRequest: Optional<POINodeRequest>;\n\n  constructor(poiNodeURLs?: string[]) {\n    this.poiNodeRequest = isDefined(poiNodeURLs)\n      ? new POINodeRequest(poiNodeURLs)\n      : undefined;\n  }\n\n  async validateRailgunTxidMerkleroot(\n    txidVersion: TXIDVersion,\n    chain: Chain,\n    tree: number,\n    index: number,\n    merkleroot: string,\n  ): Promise<boolean> {\n    if (!this.poiNodeRequest) {\n      return false;\n    }\n    return this.poiNodeRequest.validateRailgunTxidMerkleroot(\n      txidVersion,\n      chain,\n      tree,\n      index,\n      merkleroot,\n    );\n  }\n\n  async getLatestValidatedRailgunTxid(\n    txidVersion: TXIDVersion,\n    chain: Chain,\n  ): Promise<{ txidIndex: Optional<number>; merkleroot: Optional<string> }> {\n    if (!this.poiNodeRequest) {\n      return { txidIndex: undefined, merkleroot: undefined };\n    }\n    const txidStatus = await this.poiNodeRequest.getLatestValidatedRailgunTxid(\n      txidVersion,\n      chain,\n    );\n    return {\n      txidIndex: txidStatus.validatedTxidIndex,\n      merkleroot: txidStatus.validatedMerkleroot,\n    };\n  }\n}\n"]}